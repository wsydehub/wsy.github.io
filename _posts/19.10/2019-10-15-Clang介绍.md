---
layout:     post
title:      "clang介绍"
subtitle:   "Introduce of clang"
date:       2019-10-15 16:23:00
author:     "Dsyzxml"
header-img: "img/in-post/PostBackground/ab.jpeg"
catalog: true
tags:
    - C/C++
    - clang
---

## Introduce

Clang编译器是一个面向C编程语言家族的开源编译器，旨在成为这些语言中类实现最好的。Clang建立在LLVM优化器和代码生成器，允许它提供高质量的优化和多目标的代码生成支持。

# 调试选项

## 控制调试信息大小

Debug info kind generated by Clang can be set by one of the flags listed below. If multiple flags are present, the last one is used.

>-g0

Don’t generate any debug info (default).

>-gline-tables-only

Generate line number tables only.

This kind of debug info allows to obtain stack traces with function names, file names and line numbers (by such tools as gdb or addr2line). It doesn’t contain any other data (e.g. description of local variables or function parameters).

>-fstandalone-debug

Clang supports a number of optimizations to reduce the size of debug information in the binary. They work based on the assumption that the debug type information can be spread out over multiple compilation units. For instance, Clang will not emit type definitions for types that are not needed by a module and could be replaced with a forward declaration. Further, Clang will only emit type info for a dynamic C++ class in the module that contains the vtable for the class.

The -fstandalone-debug option turns off these optimizations. This is useful when working with 3rd-party libraries that don’t come with debug information. Note that Clang will never emit type information for types that are not referenced at all by the program.

>-fno-standalone-debug

On Darwin -fstandalone-debug is enabled by default. The -fno-standalone-debug option can be used to get to turn on the vtable-based optimization described above.

>-g

Generate complete debug info.

## 控制生成宏调试信息

Debug info for C preprocessor macros increases the size of debug information in the binary. Macro debug info generated by Clang can be controlled by the flags listed below.

>-fdebug-macro

Generate debug info for preprocessor macros. This flag is discarded when -g0 is enabled.

>-fno-debug-macro

Do not generate debug info for preprocessor macros (default).

## 控制调试信息的优化

While Clang generally emits standard DWARF debug info <http://dwarfstd.org>, different debuggers may know how to take advantage of different specific DWARF features. You can “tune” the debug info for one of several different debuggers.

>-ggdb, -glldb, -gsce

Tune the debug info for the gdb, lldb, or Sony PlayStation® debugger, respectively. Each of these options implies -g. (Therefore, if you want both -gline-tables-only and debugger tuning, the tuning option must come first.)


## 常用编译选项

>-o

输出文件

> -I

添加指定的搜索路径(搜索include file)

> -F

添加搜索路径(搜索Framework)

> -L \<dir\>                

Add directory to library search path

> -stdlib=\<directory\>

指定c++标准库,支持libstdc++和libc++.不指定则使用系统默认的.

> -std=\<standard\>

指定标准默认的c标准是gnu11,默认的c++标准是gnu14

>-E

Run the preprocessor stage.

>-fsyntax-only

Run the preprocessor, parser and type checking stages.

>-S

Run the previous stages as well as LLVM generation and optimization stages and target-specific code  generation,  producing  an assembly file.

>-c

Run  all  of  the above, plus the assembler, generating a target ".o" object file.

>no stage selection option

If no stage selection option is specified, all stages above are run,  and  the linker is run to combine the results into an executable or shared library.